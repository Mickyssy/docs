"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3837],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(n),h=r,m=d["".concat(s,".").concat(h)]||d[h]||c[h]||l;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var u=2;u<l;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9756:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const l={sidebar_position:4,description:"Steps to get started with Launchpad, the Kubernetes toolkit for Graph Protocol Indexers"},o="Getting Started",i={unversionedId:"launchpad/getting-started",id:"launchpad/getting-started",title:"Getting Started",description:"Steps to get started with Launchpad, the Kubernetes toolkit for Graph Protocol Indexers",source:"@site/docs/launchpad/getting-started.md",sourceDirName:"launchpad",slug:"/launchpad/getting-started",permalink:"/launchpad/getting-started",draft:!1,editUrl:"https://github.com/graphops/docs/edit/main/docs/launchpad/getting-started.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,description:"Steps to get started with Launchpad, the Kubernetes toolkit for Graph Protocol Indexers"},sidebar:"launchpadSidebar",previous:{title:"Design Principles",permalink:"/launchpad/design-principles"}},s={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quickstart",id:"quickstart",level:2},{value:"1. Install Taskfile",id:"1-install-taskfile",level:3},{value:"2. Use this starter for your new infra repo",id:"2-use-this-starter-for-your-new-infra-repo",level:3},{value:"3. Install the launchpad-core submodule and all local dependencies",id:"3-install-the-launchpad-core-submodule-and-all-local-dependencies",level:3},{value:"4. Update the configuration with your values",id:"4-update-the-configuration-with-your-values",level:3},{value:"5. Bootstrap your hosts with Kubernetes",id:"5-bootstrap-your-hosts-with-kubernetes",level:3},{value:"6. Install releases into the cluster for base cluster services",id:"6-install-releases-into-the-cluster-for-base-cluster-services",level:3},{value:"7. Install Erigon, Nimbus and Proxyd for Ethereum mainnet",id:"7-install-erigon-nimbus-and-proxyd-for-ethereum-mainnet",level:3},{value:"8. Install the Indexer Stack on the Goerli Protocol Deployment",id:"8-install-the-indexer-stack-on-the-goerli-protocol-deployment",level:3},{value:"Updates",id:"updates",level:2},{value:"Updating <code>launchpad-core</code>",id:"updating-launchpad-core",level:3},{value:"Pulling in starter changes",id:"pulling-in-starter-changes",level:3},{value:"Contributing",id:"contributing",level:2},{value:"See also",id:"see-also",level:2}],p={toc:u};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"getting-started"},"Getting Started"),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"At least one host running Ubuntu 22.04 LTS"),(0,r.kt)("li",{parentName:"ul"},"SSH access to that host on your local machine using public key authentication. ",(0,r.kt)("strong",{parentName:"li"},"Password authentication is not supported")),(0,r.kt)("li",{parentName:"ul"},"If you're on a Mac, Homebrew must be installed to use ",(0,r.kt)("inlineCode",{parentName:"li"},"launchpad:deps"))),(0,r.kt)("h2",{id:"quickstart"},"Quickstart"),(0,r.kt)("h3",{id:"1-install-taskfile"},"1. Install Taskfile"),(0,r.kt)("p",null,"Launchpad has a large number of tooling dependencies that will run on your local machine. The most important dependency is ",(0,r.kt)("a",{parentName:"p",href:"https://taskfile.dev"},"Taskfile"),"."),(0,r.kt)("p",null,"Follow the ",(0,r.kt)("a",{parentName:"p",href:"https://taskfile.dev/installation/"},"installation instructions")," for your environment and install Taskfile before continuing."),(0,r.kt)("h3",{id:"2-use-this-starter-for-your-new-infra-repo"},"2. Use this starter for your new infra repo"),(0,r.kt)("p",null,"Next, we are going to create the repository that will contain your new infrastructure's configuration."),(0,r.kt)("p",null,"First, prepare a new empty repository to hold your infrastructure repo. This could be a new repository on GitHub, GitLab, BitBucket, etc."),(0,r.kt)("p",null,"Next, we're going to clone ",(0,r.kt)("inlineCode",{parentName:"p"},"launchpad-starter"),", and then replace the existing ",(0,r.kt)("inlineCode",{parentName:"p"},"origin")," remote with your new remote repository. This allows us to retain the commit history of ",(0,r.kt)("inlineCode",{parentName:"p"},"launchpad-starter"),".. A shared commit history will make future rebases against the upstream ",(0,r.kt)("inlineCode",{parentName:"p"},"launchpad-starter")," much easier."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"#\xa0Clone the starter into my-new-infra and cd into it\ngit clone https://github.com/graphops/launchpad-starter my-new-infra\ncd my-new-infra\n\n# Set your own remote as origin\ngit remote remove origin\ngit remote add origin git@github.com:you/your-infra.git\n\n# Push to your new repo\ngit push origin main\n")),(0,r.kt)("p",null,"All work on your infrastructure will take place in this new repo. We recommend carefully version controlling all changes you make to your infrastructure configuration."),(0,r.kt)("h3",{id:"3-install-the-launchpad-core-submodule-and-all-local-dependencies"},"3. Install the launchpad-core submodule and all local dependencies"),(0,r.kt)("p",null,"Next, we need to install the ",(0,r.kt)("inlineCode",{parentName:"p"},"launchpad-core")," submodule, which contains Taskfile definitions, Helm Release templates and other useful things we will use. We also need to install all of the local tooling dependencies (like Helm or Kubectl) that we will need."),(0,r.kt)("p",null,"We can easily do both of these things by running the launchpad:setup command."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# You may need to use sudo for this command\ntask launchpad:setup\n\n# This will run two other tasks:\n# launchpad:update-core, which will install the launchpad-core submodule\n# launchpad:deps, which will install all the local tooling dependencies\n")),(0,r.kt)("p",null,"Installing the ",(0,r.kt)("inlineCode",{parentName:"p"},"launchpad-core")," submodule will leave an uncommitted change in our new repo, so let's commit that now."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'git add .\ngit commit -m "feat: added launchpad-core submodule"\n')),(0,r.kt)("h3",{id:"4-update-the-configuration-with-your-values"},"4. Update the configuration with your values"),(0,r.kt)("p",null,"Next we need to fill out ",(0,r.kt)("inlineCode",{parentName:"p"},"inventory/inventory.yaml"),". This file contains our host definitions. You can find sample configurations in ",(0,r.kt)("inlineCode",{parentName:"p"},"inventory/samples"),"."),(0,r.kt)("h3",{id:"5-bootstrap-your-hosts-with-kubernetes"},"5. Bootstrap your hosts with Kubernetes"),(0,r.kt)("p",null,"First, let's apply the base host configuration to your hosts."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"task hosts:apply-base\n")),(0,r.kt)("p",null,"Next, we can install ",(0,r.kt)("a",{parentName:"p",href:"https://k0sproject.io/"},"K0s"),", our chosen distribution of Kubernetes, onto your hosts."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"task hosts:apply-k0s\n")),(0,r.kt)("p",null,"We should now have our cluster credentials at ",(0,r.kt)("inlineCode",{parentName:"p"},"inventory/artifacts/k0s-kubeconfig.yml"),". Let's make these our default credentials."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Make sure our config directory exists\nmkdir -p ~/.kube\n# Backup our existing credentials if we have any\nmv ~/.kube/config ~/.kube/config.backup.$(date +%s)\n# Copy our new config into the default location\ncp inventory/artifacts/k0s-kubeconfig.yml ~/.kube/config\n# Set secure permissions on the file\nchmod 600 ~/.kube/config\n")),(0,r.kt)("h3",{id:"6-install-releases-into-the-cluster-for-base-cluster-services"},"6. Install releases into the cluster for base cluster services"),(0,r.kt)("p",null,"Next we need to install key non-Graph components of our stack, including monitoring and logging systems."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"task releases:apply-base\n")),(0,r.kt)("h3",{id:"7-install-erigon-nimbus-and-proxyd-for-ethereum-mainnet"},"7. Install Erigon, Nimbus and Proxyd for Ethereum mainnet"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"task releases:apply -- eth-mainnet\n")),(0,r.kt)("h3",{id:"8-install-the-indexer-stack-on-the-goerli-protocol-deployment"},"8. Install the Indexer Stack on the Goerli Protocol Deployment"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"task releases:apply -- graph-goerli\n")),(0,r.kt)("h2",{id:"updates"},"Updates"),(0,r.kt)("h3",{id:"updating-launchpad-core"},"Updating ",(0,r.kt)("inlineCode",{parentName:"h3"},"launchpad-core")),(0,r.kt)("p",null,"As new versions of key components in the stack are released, we will update ",(0,r.kt)("inlineCode",{parentName:"p"},"launchpad-core"),"'s templated definitions. You can easily inherit these updates by pulling down the latest submodule."),(0,r.kt)("p",null,"Launchpad comes with a built in task to do this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"task launchpad:update-core\n")),(0,r.kt)("h3",{id:"pulling-in-starter-changes"},"Pulling in starter changes"),(0,r.kt)("p",null,"From time to time, you may want to update your infra repo with the latest changes from our starter. "),(0,r.kt)("p",null,"Launchpad comes with a built in task to do this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"task launchpad:pull-upstream-starter\n")),(0,r.kt)("h2",{id:"contributing"},"Contributing"),(0,r.kt)("p",null,"We welcome and appreciate your contributions! Please see the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/graphops/launchpad-starter/blob/main/CONTRIBUTING.md"},"Contributor Guide"),", ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/graphops/launchpad-starter/blob/main/CODE_OF_CONDUCT.md"},"Code Of Conduct")," and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/graphops/launchpad-starter/blob/main/SECURITY.md"},"Security Notes")," for this repository."),(0,r.kt)("h2",{id:"see-also"},"See also"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/graphops/launchpad-core"},(0,r.kt)("inlineCode",{parentName:"a"},"graphops/launchpad-core"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/graphops/helm-charts"},(0,r.kt)("inlineCode",{parentName:"a"},"graphops/helm-charts")))))}c.isMDXComponent=!0}}]);